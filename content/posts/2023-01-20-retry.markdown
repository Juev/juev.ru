---
title: "–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤"
date: 2023-01-20T10:08:11+0300
image: https://static.juev.org/2023/01/retry.png
tags: 
  - bash
  - web
  - tips
  - cli
---

–ù–∞ –±–∞–∑–µ Github –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–ª –ø–∞—Ä—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–ø—É—Å–∫
–ø–µ—Ä–µ–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á. –í –æ—Å–Ω–æ–≤–µ –ª–µ–∂–∏—Ç —Ä–∞–∑–±–æ—Ä rss-–ª–µ–Ω—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ Getpocket, –≤
–∫–æ—Ç–æ—Ä–æ–º —è —Å–æ–±–∏—Ä–∞—é –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏. –ò –¥–∞–ª—å—à–µ –ª–∏–±–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
markdown-—Ñ–∞–π–ª–∞ –≤ –≤–∏–¥–µ –∂—É—Ä–Ω–∞–ª–∞, –ª–∏–±–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å—Å—ã–ª–æ–∫ –≤ –∏–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã.

–ü—Ä–æ–±–æ–≤–∞–ª —Ä–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∏—Å—Ç—ã–π bash –¥–ª—è –¥–∞–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏, –Ω–æ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç
—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –≤ —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ, —á—Ç–æ –æ—Ç–Ω–∏–º–∞–µ—Ç
–≤—Ä–µ–º—è –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–±–æ—é. –û–±—ã—á–Ω–æ –∫ —ç—Ç–æ–º—É –ø—Ä–∏–≤–æ–¥—è—Ç –æ—à–∏–±–∫–∏ –Ω–∞ —Å–µ—Ç–∏,
–∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç. –í—ã–≥–ª—è–¥–µ–ª–æ —ç—Ç–æ –≤–æ—Ç —Ç–∞–∫:

```yaml
name: Cronjob operations

on:
  schedule:
    - cron: "*/15 * * * *" # Runs every 15 minuts

jobs:
  pocket-to-linkding:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: üíø Setup
        run: sudo apt update && sudo apt install -y git jq curl sed libxml2-utils
      - name: üöÄ Run Automation
        run: bash ./scripts/getpocket.sh
        env:
          LINKDING_TOKEN: ${{ secrets.LINKDING_TOKEN }}
```

–ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–∏–ª —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É —Ç–µ–º, —á—Ç–æ –æ—Ç–∫–∞–∑–∞–ª—Å—è –æ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ü–û –≤ —Å–∏—Å—Ç–µ–º—É –∏
–ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞–≤ —Å–≤–æ—é –Ω–µ–±–æ–ª—å—à—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ Go, –∫–æ—Ç–æ—Ä–∞—è –∏ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è —Ä–∞–∑–±–æ—Ä–æ–º
–ª–µ–Ω—Ç—ã. –ö–æ–º–º–∏—Ç —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏:
[3b73adefd2044a214018fecd5fbe4506e6ed05ff][3b73adefd2044a214018fecd5fbe4506e6ed05ff]

–í —Å–∫—Ä–∏–ø—Ç–µ –∑–∞–≥—Ä—É–∂–∞–µ–º –±–∏–Ω–∞—Ä–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –ø–æ–º–æ—â—å—é wget –∏ –∑–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞–µ–º –µ–≥–æ:

```sh
wget https://github.com/juev/rss-parser/releases/latest/download/rss-parser-linux-amd64 -O run
chmod +x run

./run https://getpocket.com/users/juev/feed/all > $FILE
```

–°–∏—Ç—É–∞—Ü–∏—è —É–ª—É—á—à–∏–ª–∞—Å—å, –Ω–æ –ø–µ—Ä–µ–æ–¥–∏—á–µ—Å–∫–∏ –≤–æ–∑–Ω–∏–∫–∞–ª–∏ [–æ—à–∏–±–∫–∏](https://github.com/juev/cronjob/actions/runs/3959751292):

```plain
Run bash ./scripts/getpocket.sh
  bash ./scripts/getpocket.sh
  shell: /usr/bin/bash -e {0}
  env:
    LINKDING_TOKEN: ***
--2023-01-19 15:12:06--  https://github.com/juev/rss-parser/releases/latest/download/rss-parser-linux-amd64
Resolving github.com (github.com)... 192.30.255.112
Connecting to github.com (github.com)|192.30.255.112|:443... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://github.com/juev/rss-parser/releases/download/v0.0.1/rss-parser-linux-amd64 [following]
--2023-01-19 15:12:07--  https://github.com/juev/rss-parser/releases/download/v0.0.1/rss-parser-linux-amd64
Reusing existing connection to github.com:443.
HTTP request sent, awaiting response... 302 Found
Location: https://objects.githubusercontent.com/github-production-release-asset-2e65be/588492463/45fa596c-f8ba-49b4-84ca-dbaf210f0325?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230119%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20230119T151207Z&X-Amz-Expires=300&X-Amz-Signature=b41e5f0f8452c595112141930b477277460ff41330e332adbb20ea1abfcddee1&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=588492463&response-content-disposition=attachment%3B%20filename%3Drss-parser-linux-amd64&response-content-type=application%2Foctet-stream [following]
--2023-01-19 15:12:07--  https://objects.githubusercontent.com/github-production-release-asset-2e65be/588492463/45fa596c-f8ba-49b4-84ca-dbaf210f0325?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20230119%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20230119T151207Z&X-Amz-Expires=300&X-Amz-Signature=b41e5f0f8452c595112141930b477277460ff41330e332adbb20ea1abfcddee1&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=588492463&response-content-disposition=attachment%3B%20filename%3Drss-parser-linux-amd64&response-content-type=application%2Foctet-stream
Resolving objects.githubusercontent.com (objects.githubusercontent.com)... 185.199.111.133, 185.199.108.133, 185.199.109.133, ...
Connecting to objects.githubusercontent.com (objects.githubusercontent.com)|185.199.111.133|:443... connected.
HTTP request sent, awaiting response... 503 Egress is over the account limit.
2023-01-19 15:12:12 ERROR 503: Egress is over the account limit..
```

–ù–∞ —ç—Ç–æ—Ç —Ä–∞–∑ 503 –æ—à–∏–±–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–Ω–æ–≤–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–±–æ—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏.

–ü–æ–¥—É–º–∞–ª, –ø–æ—á–µ–º—É –±—ã –Ω–µ —Å–¥–µ–ª–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—ã, –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —Å–µ—Ç–∏?

–ò–∑–º–µ–Ω–∏–ª –∫–æ–º–∞–Ω–¥—É –∑–∞–≥—Ä—É–∑–∫–∏:

```sh
curl --retry-all-errors --retry 10 --retry-delay 0 --retry-max-time 40 --max-time 10 \
 https://github.com/juev/rss-parser/releases/latest/download/rss-parser-linux-amd64 \
 -L -o run
```

–ò –ø–æ–∫–∞ –æ—à–∏–±–æ–∫ –Ω–µ –Ω–∞–±–ª—é–¥–∞—é. üëå

[3b73adefd2044a214018fecd5fbe4506e6ed05ff]: https://github.com/juev/cronjob/commit/3b73adefd2044a214018fecd5fbe4506e6ed05ff
